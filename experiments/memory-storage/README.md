* Assumption for now: In the cart, only the grand total is added up and displays near the "Send order" button. In the list of items, it lists e.g. $13 x 2 if an item costs $13 and the user chose quantity 2. The 2 dynamically changes by jQuery when user manipulates the quantity in the Cart, and the grand total is also manipulated.

# Objects that will exist in memory but not the database

## Cart objects, and one object of objects that holds them with userIDs as keys

```js
//This is just an outline

const userCart1 = {

  //Attributes
  items: {soup: {price: 13.00, quant: 1}, salad: {price: 10.00, quant: 2}}, 

  //Helper methods
  addDish();
  removeDish();
  changeDishQuant();
  getTotalPrice();

}

//Carts are stored in an object of all carts with this structure
const allUserCarts = {userID: userCart2, userID2: userCart2}

//We reference an individual cart object like this, where we set currUserID manually or get it from cookies

allUserCarts[currUserID]

```

How this object evolves over time:
- The user is logged into a session. Before we have login/registration, we use one user as a global default
- A user can only have one order in the cart at a time. When the user is on the Menu page and they click "Add to cart", we check if  `allCartObjects[userID]` already exists, where `userID` is the ID of the logged in user. If it exists, we manipulate data inside the existing object. If not, we create a new cart object for that user.
- We can manipulate the quantity of menu items both from the Menu page and from the Cart page. If a certain menu item already exists in the object, we change the amount. If it doesn't exist, we add it. If the user presses 'remove from cart', we delete it.
* When the user presses "Send order" from the Cart page, the order is removed from the 'allCartObjects'



## Orders waiting for approval by restaurant, and one object of objects that holds them with orderID (generated by database) as keys
```js

const waitingOrder1 = 
{
    userName: "Daria" //Obtained from the database based on UserID
    userPhone: "+5145855582" //Obtained from the database based on UserID
    items: {soup: {price: 13.00, quant: 1}, salad: {price: 10.00, quant: 2}}
    totalPrice: 33.00 
    //Above two properties obtained from the allUserCarts[currUserID] object when the user clicks "Send order"
}

//Waiting orders are stored in another object and referenced by ID
allWaitingOrders = {orderID1: waitingOrder1, orderID2: waitingOrder1}

//We reference one waitingOrder object like
allWaitingOrders[orderID1]

```

How this object evolves over time:
* Then the user presses "Send order", info from the userCart object described above is logged into the database. The database returns an orderID that is unique forever. At this time, we create a waitingOrder and place it in the allWaitingOrders object with the orderID generated by the database as a key.
  * the  `items` property is transfered directly from the userCart object, and the total is calculated by `getTotalPrice()`
  * When this info is transferred, the userCart object is deleted (and the database is updated)
* Twilio API sends a message to the restaurant, listing the content of the order and the total price. The restaurant is prompted to send an SMS in the format `[orderID] - [minutes to complete]`. This is so that, if they receive multiple messages before being able to respond with the time, they can specify which order they are setting the prep time for.
  * There is a check on the restaurant's SMS - they must enter a valid minute number, and the order ID they list *must be in the `allWaitingOrders`* list, to stop them from entering a time for orders that don't exist or orders that already have a set time
* Once the restaurant sends a valid response by SMS:
  * The status of the order in the database is updated from "waiting for confirmation" to "being prepared" (or whatever we call it)
  * The user receives an SMS saying how long they must wait for the order (and summarizes the order and price again)
  * The order is deleted from the allWaitingOrders list
  * **If possible??** - jQuery dynamically changes the status of this order on the Orders page

What happens after:
* A `setTimeout` is set for the specified time, and once it runs out:
  * The user is notified by SMS that the order is ready
  * The status of the order in the database is changed from "being prepared" to "completed"
  * **If possible??** - jQuery dynamically changes the status of this order on the Orders page